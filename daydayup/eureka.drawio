<mxfile host="app.diagrams.net" modified="2020-09-29T09:13:47.124Z" agent="5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36" etag="BqWse-Z6nuJ4ULFYIBRe" version="13.7.6" type="github">
  <diagram id="uahqVEcAnmFEvCsxrpgT" name="Eureka如何承载千万级访问">
    <mxGraphModel dx="1899" dy="1043" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="UJuq882CUuYNrBgm4tqE-1" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;#34;meslo lg m dz for powerline&amp;#34; , monospace ; font-size: 12.0pt&quot;&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span style=&quot;font-size: 12pt ; white-space: nowrap ; color: rgb(204 , 120 , 50)&quot;&gt;public abstract class &lt;/span&gt;&lt;span style=&quot;font-size: 12pt ; white-space: nowrap&quot;&gt;AbstractInstanceRegistry &lt;/span&gt;&lt;span style=&quot;font-size: 12pt ; white-space: nowrap ; color: rgb(204 , 120 , 50)&quot;&gt;implements &lt;/span&gt;&lt;span style=&quot;font-size: 12pt ; white-space: nowrap&quot;&gt;InstanceRegistry {&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    private final &lt;/span&gt;ConcurrentHashMap&amp;lt;String&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;Map&amp;lt;String&lt;span style=&quot;color: #cc7832&quot;&gt;, &lt;/span&gt;Lease&amp;lt;InstanceInfo&amp;gt;&amp;gt;&amp;gt; &lt;span style=&quot;color: #9876aa&quot;&gt;registry &lt;/span&gt;= &lt;span style=&quot;color: #cc7832&quot;&gt;new &lt;/span&gt;ConcurrentHashMap()&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br/&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span style=&quot;font-size: 12pt ; white-space: nowrap&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/pre&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="200" y="1775" width="1100" height="160" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-2" value="&lt;span style=&quot;font-size: 25px&quot;&gt;&lt;b&gt;Eureka如何承载千万级访问&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=16;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="640" y="15" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-3" value="&lt;ol class=&quot;list-paddingleft-2&quot; style=&quot;margin: 0px ; padding: 0px 0px 0px 2.2em ; max-width: 100% ; color: rgb(51 , 51 , 51) ; font-family: , &amp;#34;blinkmacsystemfont&amp;#34; , &amp;#34;helvetica neue&amp;#34; , &amp;#34;pingfang sc&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei ui&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;arial&amp;#34; , sans-serif ; font-size: 17px ; letter-spacing: 0.621714px ; text-align: justify ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;&lt;li style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word&quot;&gt;&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; clear: both ; min-height: 1em ; color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;helvetica&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;arial&amp;#34; , sans-serif ; font-size: medium ; vertical-align: baseline ; letter-spacing: 1px ; line-height: 1.5em ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 16px&quot;&gt;Eureka&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px&quot;&gt;注册中心使用什么样的方式来储存各个服务注册时发送过来的机器地址和端口号？&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; clear: both ; min-height: 1em&quot;&gt;&lt;br style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word&quot;&gt;&lt;/p&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word&quot;&gt;&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; clear: both ; min-height: 1em ; color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;helvetica&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;arial&amp;#34; , sans-serif ; font-size: medium ; vertical-align: baseline ; letter-spacing: 1px ; line-height: 1.5em ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px&quot;&gt;各个服务找&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 16px&quot;&gt;Eureka Server&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px&quot;&gt;拉取注册表的时候，是什么样的频率？&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; clear: both ; min-height: 1em&quot;&gt;&lt;br style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word&quot;&gt;&lt;/p&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word&quot;&gt;&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; clear: both ; min-height: 1em ; color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;helvetica&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;arial&amp;#34; , sans-serif ; font-size: medium ; vertical-align: baseline ; letter-spacing: 1px ; line-height: 1.5em ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 16px&quot;&gt;各个服务是如何拉取注册表的？&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; clear: both ; min-height: 1em&quot;&gt;&lt;br style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word&quot;&gt;&lt;/p&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word&quot;&gt;&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; clear: both ; min-height: 1em ; color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;helvetica&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;arial&amp;#34; , sans-serif ; font-size: medium ; vertical-align: baseline ; letter-spacing: 1px ; line-height: 1.5em ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px&quot;&gt;一个几百服务，部署上千台机器的大型分布式系统，会对&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 16px&quot;&gt;Eureka Server&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px&quot;&gt;造成多大的访问压力？&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; clear: both ; min-height: 1em&quot;&gt;&lt;br style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word&quot;&gt;&lt;/p&gt;&lt;/li&gt;&lt;li style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word&quot;&gt;&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; clear: both ; min-height: 1em ; color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;helvetica&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;arial&amp;#34; , sans-serif ; font-size: medium ; vertical-align: baseline ; letter-spacing: 1px ; line-height: 1.5em ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 16px&quot;&gt;Eureka Server&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px&quot;&gt;从技术层面是如何抗住日千万级访问量的？&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fillColor=#A8DADC;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="160" y="90" width="730" height="270" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-4" value="&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; clear: both ; min-height: 1em ; font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;helvetica&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;arial&amp;#34; , sans-serif ; font-size: medium ; vertical-align: baseline ; letter-spacing: 1px ; line-height: 220% ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 16px ; color: rgb(61 , 170 , 214)&quot;&gt;&lt;strong style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word&quot;&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;举个例子&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 16px ; color: rgb(61 , 170 , 214)&quot;&gt;：&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot; style=&quot;margin: 0px ; padding: 0px 0px 0px 2.2em ; max-width: 100% ; color: rgb(51 , 51 , 51) ; font-family: , &amp;#34;blinkmacsystemfont&amp;#34; , &amp;#34;helvetica neue&amp;#34; , &amp;#34;pingfang sc&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei ui&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;arial&amp;#34; , sans-serif ; font-size: 17px ; letter-spacing: 0.621714px ; text-align: justify ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;&lt;li&gt;&lt;p style=&quot;text-align: justify ; margin: 0px ; padding: 0px ; max-width: 100% ; clear: both ; min-height: 1em ; font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;helvetica&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;arial&amp;#34; , sans-serif ; font-size: medium ; vertical-align: baseline ; letter-spacing: 1px ; line-height: 1.5em ; box-sizing: border-box ; overflow-wrap: break-word ; display: inline&quot;&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px&quot;&gt;库存服务原本部署在&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 16px&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px&quot;&gt;台机器上，现在扩容了，部署到了&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px ; font-family: &amp;#34;calibri&amp;#34;&quot;&gt;3&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px&quot;&gt;台机器，并且均注册到了&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px ; font-family: &amp;#34;calibri&amp;#34;&quot;&gt;Eureka Server&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px&quot;&gt;上。&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word ; font-size: 15px&quot;&gt;然后订单服务的&lt;/span&gt;&lt;span style=&quot;font-size: 16px ; margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;Eureka Client&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word ; font-size: 15px&quot;&gt;会每隔&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word ; font-size: 15px ; font-family: &amp;#34;calibri&amp;#34;&quot;&gt;30&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word ; font-size: 15px&quot;&gt;秒去找&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word ; font-size: 15px ; font-family: &amp;#34;calibri&amp;#34;&quot;&gt;Eureka Server&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word ; font-size: 15px&quot;&gt;拉取最近注册表的变化，看看其他服务的地址有没有变化。&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 16px ; margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;除此之外，&lt;/span&gt;&lt;span style=&quot;font-size: 16px ; margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;Eureka还有一个心跳机制&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; font-size: 15px ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;，各个&lt;/span&gt;Eureka Client&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; font-size: 15px ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;每隔&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px ; font-family: &amp;#34;calibri&amp;#34;&quot;&gt;30&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; font-size: 15px ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;秒会发送一次心跳到&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; word-wrap: break-word ; font-size: 15px ; font-family: &amp;#34;calibri&amp;#34;&quot;&gt;Eureka Server&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; font-size: 15px ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;，通知人家说，哥们，我这个服务实例还活着！&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; clear: both ; min-height: 1em ; font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;helvetica&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , &amp;#34;arial&amp;#34; , sans-serif ; font-size: medium ; vertical-align: baseline ; letter-spacing: 1px ; line-height: normal ; box-sizing: border-box ; overflow-wrap: break-word&quot;&gt;&lt;span style=&quot;font-size: 16px&quot;&gt;如果某个Eureka Client很长时间没有发送心跳给&lt;/span&gt;&lt;span style=&quot;margin: 0px ; padding: 0px ; max-width: 100% ; box-sizing: border-box ; overflow-wrap: break-word ; font-size: 15px ; font-family: &amp;#34;calibri&amp;#34;&quot;&gt;Eureka Server&lt;/span&gt;&lt;span style=&quot;font-size: 16px&quot;&gt;，那么就说明这个服务实例已经挂了。&lt;br&gt;&lt;/span&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fillColor=#A8DADC;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="160" y="380" width="1100" height="240" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-5" value="&lt;b&gt;2. Eureka Server 设计精妙的注册表存储结构&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="155" y="1280" width="540" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-6" value="&lt;p style=&quot;line-height: 130% ; font-size: 20px&quot;&gt;前置条件：&lt;br&gt;100 个服务&amp;nbsp; 每个服务20台机器&amp;nbsp; 机器4C8G&lt;br&gt;&lt;br&gt;&amp;nbsp;100 * 20 = 2000 台机器&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; Eureka Client: 30s 一次心跳；&amp;nbsp; 30s 一个拉取注册表请求&lt;br&gt;&lt;br&gt;&amp;nbsp; Eureka Server 作为一个注册中心，每秒要被请求多少次？一天请求多少次？&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1.&amp;nbsp; 1分钟： 每个服务发送2次心跳请求 + 2次拉取注册表请求 = 4次请求&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;2.&amp;nbsp; 2000 * 4 = 8000 次/min&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;3.&amp;nbsp; 8000/60=133次/s&amp;nbsp; &amp;nbsp; &amp;nbsp; EurekaServer每秒会被请求133次&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;4.&amp;nbsp; 24 * 60 * 8000 = 1152万&amp;nbsp; &amp;nbsp; 每天访问1152万次&lt;/p&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fillColor=#A8DADC;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="200" y="1385" width="700" height="360" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-7" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;meslo lg m dz for powerline&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;private &lt;/span&gt;&lt;span style=&quot;color: #ffc66d&quot;&gt;InstanceInfo&lt;/span&gt;() {&lt;br&gt;    &lt;span style=&quot;color: #cc7832&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;sid &lt;/span&gt;= &lt;span style=&quot;color: #6a8759&quot;&gt;&quot;na&quot;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;port &lt;/span&gt;= &lt;span style=&quot;color: #6897bb&quot;&gt;7001&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;securePort &lt;/span&gt;= &lt;span style=&quot;color: #6897bb&quot;&gt;7002&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;countryId &lt;/span&gt;= &lt;span style=&quot;color: #6897bb&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;isSecurePortEnabled &lt;/span&gt;= &lt;span style=&quot;color: #cc7832&quot;&gt;false;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;isUnsecurePortEnabled &lt;/span&gt;= &lt;span style=&quot;color: #cc7832&quot;&gt;true;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;status &lt;/span&gt;= InstanceInfo.InstanceStatus.&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;UP&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;overriddenStatus &lt;/span&gt;= InstanceInfo.InstanceStatus.&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;UNKNOWN&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;isInstanceInfoDirty &lt;/span&gt;= &lt;span style=&quot;color: #cc7832&quot;&gt;false;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;isCoordinatingDiscoveryServer &lt;/span&gt;= Boolean.&lt;span style=&quot;color: #9876aa ; font-style: italic&quot;&gt;FALSE&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;version &lt;/span&gt;= &lt;span style=&quot;color: #6a8759&quot;&gt;&quot;unknown&quot;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;metadata &lt;/span&gt;= &lt;span style=&quot;color: #cc7832&quot;&gt;new &lt;/span&gt;ConcurrentHashMap()&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;lastUpdatedTimestamp &lt;/span&gt;= System.&lt;span style=&quot;font-style: italic&quot;&gt;currentTimeMillis&lt;/span&gt;()&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;lastDirtyTimestamp &lt;/span&gt;= &lt;span style=&quot;color: #cc7832&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;lastUpdatedTimestamp&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;}&lt;/pre&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="197" y="1820" width="630" height="530" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-8" value="&lt;pre style=&quot;background-color: #2b2b2b ; color: #a9b7c6 ; font-family: &amp;quot;meslo lg m dz for powerline&amp;quot; , monospace ; font-size: 12.0pt&quot;&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;public &lt;/span&gt;&lt;span style=&quot;color: #ffc66d&quot;&gt;Lease&lt;/span&gt;(&lt;span style=&quot;color: #507874&quot;&gt;T &lt;/span&gt;r&lt;span style=&quot;color: #cc7832&quot;&gt;, int &lt;/span&gt;durationInSecs) {&lt;br&gt;    &lt;span style=&quot;color: #cc7832&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;holder &lt;/span&gt;= r&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;registrationTimestamp &lt;/span&gt;= System.&lt;span style=&quot;font-style: italic&quot;&gt;currentTimeMillis&lt;/span&gt;()&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;lastUpdateTimestamp &lt;/span&gt;= &lt;span style=&quot;color: #cc7832&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;registrationTimestamp&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: #cc7832&quot;&gt;    this&lt;/span&gt;.&lt;span style=&quot;color: #9876aa&quot;&gt;duration &lt;/span&gt;= (&lt;span style=&quot;color: #cc7832&quot;&gt;long&lt;/span&gt;)(durationInSecs * &lt;span style=&quot;color: #6897bb&quot;&gt;1000&lt;/span&gt;)&lt;span style=&quot;color: #cc7832&quot;&gt;;&lt;br&gt;&lt;/span&gt;}&lt;/pre&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="950" y="1910" width="590" height="220" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-9" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=26;fontColor=#1D3557;strokeColor=#457B9D;labelBackgroundColor=#F1FAEE;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="720" y="2410" as="sourcePoint" />
            <mxPoint x="830" y="2103" as="targetPoint" />
            <Array as="points">
              <mxPoint x="880" y="2020" />
              <mxPoint x="880" y="2103" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-10" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=26;fontColor=#1D3557;strokeColor=#457B9D;labelBackgroundColor=#F1FAEE;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-1" target="UJuq882CUuYNrBgm4tqE-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1340" y="1960" as="sourcePoint" />
            <mxPoint x="1560" y="2020" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1580" y="1850" />
              <mxPoint x="1580" y="1870" />
              <mxPoint x="1580" y="2020" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-11" value="" style="group;fontColor=#1D3557;" vertex="1" connectable="0" parent="1">
          <mxGeometry x="160" y="689" width="1346" height="480" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-12" value="&amp;nbsp; Eureka&amp;nbsp; Server" style="whiteSpace=wrap;html=1;fontSize=26;align=center;fillColor=#A8DADC;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry x="500" y="90" width="270" height="330" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-13" value="" style="group;fontColor=#1D3557;" vertex="1" connectable="0" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry x="1056" width="290" height="140" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-14" value="" style="group;fillColor=#A8DADC;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" connectable="0" parent="UJuq882CUuYNrBgm4tqE-13">
          <mxGeometry y="10" width="290" height="130" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-15" value="库存服务" style="whiteSpace=wrap;html=1;fillColor=#A8DADC;fontSize=26;align=center;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-14">
          <mxGeometry width="290" height="130" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-16" value="Eureka Client" style="whiteSpace=wrap;html=1;fillColor=#e3c800;fontSize=26;align=left;strokeColor=#B09500;fontColor=#ffffff;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-14">
          <mxGeometry x="60" y="80" width="170" height="50" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-17" value="" style="group;fillColor=#A8DADC;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" connectable="0" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry x="1056" y="190" width="290" height="130" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-18" value="库存服务" style="whiteSpace=wrap;html=1;fillColor=none;fontSize=26;align=center;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-17">
          <mxGeometry width="290" height="130" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-19" value="Eureka Client" style="whiteSpace=wrap;html=1;fillColor=#e3c800;fontSize=26;align=left;strokeColor=#B09500;fontColor=#ffffff;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-17">
          <mxGeometry x="60" y="80" width="170" height="50" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-20" value="" style="group;fontColor=#1D3557;" vertex="1" connectable="0" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry x="1056" y="350" width="290" height="130" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-21" value="库存服务" style="whiteSpace=wrap;html=1;fillColor=#A8DADC;fontSize=26;align=center;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-20">
          <mxGeometry width="290" height="130" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-22" value="Eureka Client" style="whiteSpace=wrap;html=1;fillColor=#e3c800;fontSize=26;align=left;strokeColor=#B09500;fontColor=#ffffff;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-20">
          <mxGeometry x="60" y="80" width="170" height="50" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-23" value="" style="group;fontColor=#1D3557;" vertex="1" connectable="0" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry y="145" width="290" height="140" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-24" value="" style="group;fillColor=#A8DADC;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" connectable="0" parent="UJuq882CUuYNrBgm4tqE-23">
          <mxGeometry y="10" width="290" height="130" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-25" value="订单服务" style="whiteSpace=wrap;html=1;fillColor=#A8DADC;fontSize=26;align=center;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-24">
          <mxGeometry width="290" height="130" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-26" value="Eureka Client" style="whiteSpace=wrap;html=1;fillColor=#e3c800;fontSize=26;align=left;strokeColor=#B09500;fontColor=#ffffff;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-24">
          <mxGeometry x="60" y="80" width="170" height="50" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-27" value="" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;endSize=7;strokeWidth=2;fontSize=26;strokeColor=#457B9D;fontColor=#1D3557;labelBackgroundColor=#F1FAEE;" edge="1" parent="UJuq882CUuYNrBgm4tqE-11" target="UJuq882CUuYNrBgm4tqE-12">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1116" y="130" as="sourcePoint" />
            <mxPoint x="780" y="115" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1116" y="130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-28" value="&lt;font style=&quot;font-size: 18px&quot;&gt;1. 注册库存服务&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry x="910" y="70" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-29" value="" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;endSize=7;strokeWidth=2;fontSize=26;strokeColor=#457B9D;fontColor=#1D3557;labelBackgroundColor=#F1FAEE;" edge="1" parent="UJuq882CUuYNrBgm4tqE-11" source="UJuq882CUuYNrBgm4tqE-26">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="500" y="130" as="targetPoint" />
            <Array as="points">
              <mxPoint x="200" y="130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-30" value="&lt;font style=&quot;font-size: 17px&quot;&gt;2. 订单服务第一次拉取注册表&lt;br&gt;就发现一个库存服务实例&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry x="250" y="90" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-31" value="" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;endSize=7;strokeWidth=2;fontSize=26;entryX=1.011;entryY=0.618;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryPerimeter=0;strokeColor=#457B9D;fontColor=#1D3557;labelBackgroundColor=#F1FAEE;" edge="1" parent="UJuq882CUuYNrBgm4tqE-11" source="UJuq882CUuYNrBgm4tqE-19" target="UJuq882CUuYNrBgm4tqE-12">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="976" y="255" as="targetPoint" />
            <Array as="points">
              <mxPoint x="930" y="295" />
              <mxPoint x="930" y="294" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-32" value="" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;endSize=7;strokeWidth=2;fontSize=26;entryX=1.007;entryY=0.697;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#457B9D;fontColor=#1D3557;labelBackgroundColor=#F1FAEE;" edge="1" parent="UJuq882CUuYNrBgm4tqE-11" source="UJuq882CUuYNrBgm4tqE-22" target="UJuq882CUuYNrBgm4tqE-12">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="780" y="320" as="targetPoint" />
            <Array as="points">
              <mxPoint x="920" y="455" />
              <mxPoint x="920" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-33" value="&lt;font style=&quot;font-size: 18px&quot;&gt;3. 注册2个库存服务&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry x="886" y="260" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-34" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=26;strokeColor=#457B9D;fontColor=#1D3557;labelBackgroundColor=#F1FAEE;" edge="1" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="159" y="280" as="sourcePoint" />
            <mxPoint x="496" y="320" as="targetPoint" />
            <Array as="points">
              <mxPoint x="159" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-35" value="&lt;font style=&quot;font-size: 18px&quot;&gt;4. 订单服务每30s请求一次注册表书否发生变化&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry x="160" y="280" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-36" value="&lt;font style=&quot;font-size: 18px&quot;&gt;5. 发现库存服务新增两个注册实例，更新注册表&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fillColor=#A8DADC;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry y="360" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-37" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=26;exitX=0.3;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;strokeColor=#457B9D;fontColor=#1D3557;labelBackgroundColor=#F1FAEE;" edge="1" parent="UJuq882CUuYNrBgm4tqE-11" source="UJuq882CUuYNrBgm4tqE-36">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="60" y="360" as="sourcePoint" />
            <mxPoint x="120" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-38" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=26;entryX=0.367;entryY=-0.012;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeColor=#457B9D;fontColor=#1D3557;labelBackgroundColor=#F1FAEE;" edge="1" parent="UJuq882CUuYNrBgm4tqE-11" source="UJuq882CUuYNrBgm4tqE-26" target="UJuq882CUuYNrBgm4tqE-12">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="220" y="70" as="sourcePoint" />
            <mxPoint x="270" y="20" as="targetPoint" />
            <Array as="points">
              <mxPoint x="145" y="40" />
              <mxPoint x="599" y="40" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-39" value="&lt;font style=&quot;font-size: 18px&quot;&gt;6. 订单服务每30s发送一次心跳&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-11">
          <mxGeometry x="230" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-40" value="&lt;font style=&quot;font-size: 22px&quot;&gt;key:&amp;nbsp; 服务名 --&amp;gt; order-server&lt;br&gt;value: 一个服务的多个实例&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;value map 的 key: 服务实例的id&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;value map 的 value: 服务实例的具体信息。如ip,port,hostname等&amp;nbsp;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fillColor=#A8DADC;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="886" y="2220" width="710" height="130" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-41" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=26;fontColor=#1D3557;dashed=1;strokeColor=#457B9D;labelBackgroundColor=#F1FAEE;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1300" y="1830" as="sourcePoint" />
            <mxPoint x="1600" y="2300" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1640" y="1830" />
              <mxPoint x="1640" y="2300" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-42" value="&lt;b&gt;3. Eureka Server 端的多级缓存机制&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="215" y="2520" width="430" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-43" value="&lt;font style=&quot;font-size: 20px&quot;&gt;EurekaServer为了避免同时读写数据结构造成的并发冲突问题，采用了多级缓存机制来进一步提升服务请求的响应速度&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="270" y="2570" width="1060" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-44" value="&lt;font style=&quot;font-size: 20px&quot;&gt;1. 拉取注册表&lt;br&gt;&amp;nbsp; &amp;nbsp;a. 首先从ReadOnlyCacheMap里查缓存的注册表&lt;br&gt;&amp;nbsp; &amp;nbsp;b. 若没有，就找ReadWriteCacheMap里缓存的注册表&lt;br&gt;&amp;nbsp; &amp;nbsp;c. 如果还没有，就从内存中获取实际的注册数据&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fillColor=#A8DADC;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="240" y="2630" width="510" height="140" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-45" value="&lt;font style=&quot;font-size: 20px&quot;&gt;2. 注册表发生变更&lt;br&gt;&amp;nbsp; &amp;nbsp;a. 会在内存中更新变更的注册表数据，同时过期ReadWriteCacheMap&lt;br&gt;&amp;nbsp; &amp;nbsp;b. 在此过程中不会影响到ReadOnlyCacheMap提供查询注册信息&lt;br&gt;&amp;nbsp; &amp;nbsp;c. 一段时间内（30s),各个服务拉取注册表会直接读ReadOnlyCacheMap&lt;br&gt;&amp;nbsp; &amp;nbsp;d. 30s后，EurekaServer的后台线程发现ReadWriteCacheMap已经清空了，也会去清空ReadOnlyCacheMap中的缓存&lt;br&gt;&amp;nbsp; &amp;nbsp;e. 下次有服务拉取注册表，又会从内存中获取最新的数据了，同时填充各个缓存&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fillColor=#A8DADC;strokeColor=#457B9D;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="240" y="2800" width="1070" height="200" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-46" value="&lt;font style=&quot;font-size: 20px&quot;&gt;优点：&lt;br&gt;1. 尽可能的保证了内存注册表数据不会出现频繁的读写冲突问题&lt;br&gt;2. 进一步保证EurekaServer的大量请求，都是快速从内存走，性能极高&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=26;fontColor=#1D3557;fillColor=#A8DADC;strokeColor=#457B9D;" vertex="1" parent="1">
          <mxGeometry x="240" y="3050" width="640" height="100" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-47" value="" style="whiteSpace=wrap;html=1;rounded=0;sketch=0;fillColor=#A8DADC;fontColor=#1D3557;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="440" y="3440" width="840" height="550" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-48" value="&lt;font style=&quot;font-size: 20px&quot;&gt;&lt;b&gt;Eureka Server&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="785" y="3410" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-49" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px&quot;&gt;库存服务&lt;/font&gt;&lt;/b&gt;" style="whiteSpace=wrap;html=1;rounded=0;sketch=0;fillColor=#008a00;fontColor=#ffffff;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1450" y="3730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-50" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px&quot;&gt;库存服务&lt;/font&gt;&lt;/b&gt;" style="whiteSpace=wrap;html=1;rounded=0;sketch=0;fillColor=#e51400;fontColor=#ffffff;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1450" y="3900" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-51" value="&lt;font style=&quot;font-size: 16px&quot;&gt;1. 发起注册&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="1340" y="3730" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-52" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px&quot;&gt;注册表 (内存)&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;pre style=&quot;font-family: &amp;#34;meslo lg m dz for powerline&amp;#34; , monospace ; font-size: 12pt&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font color=&quot;#ff8000&quot;&gt;ConcurrentHashMap&amp;lt;String, Map&amp;lt;String, Lease&amp;lt;InstanceInfo&amp;gt;&amp;gt;&amp;gt; registry&lt;/font&gt;&lt;/span&gt;&lt;/pre&gt;" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;fillColor=#f0a30a;fontColor=#ffffff;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="530" y="3860" width="660" height="80" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-53" value="" style="endArrow=classic;html=1;strokeColor=#457B9D;fillColor=#A8DADC;fontColor=#1D3557;exitX=0;exitY=0.5;exitDx=0;exitDy=0;strokeWidth=2;entryX=1.003;entryY=0.363;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-49" target="UJuq882CUuYNrBgm4tqE-52">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="910" y="3730" as="sourcePoint" />
            <mxPoint x="1191" y="3803" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1320" y="3760" />
              <mxPoint x="1320" y="3889" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-54" value="&lt;font style=&quot;font-size: 16px&quot;&gt;&lt;b&gt;读写缓存&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;pre style=&quot;font-family: &amp;#34;meslo lg m dz for powerline&amp;#34; , monospace ; font-size: 12pt&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font color=&quot;#0066cc&quot;&gt;LoadingCache&amp;lt;Key, ResponseCacheImpl.Value&amp;gt; readWriteCacheMap&lt;/font&gt;&lt;/span&gt;&lt;/pre&gt;" style="whiteSpace=wrap;html=1;rounded=1;sketch=0;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="550" y="3680" width="610" height="80" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-55" value="&lt;font style=&quot;font-size: 16px&quot;&gt;&lt;b&gt;只读缓存&lt;br&gt;&lt;/b&gt;&lt;pre style=&quot;font-family: &amp;#34;meslo lg m dz for powerline&amp;#34; , monospace ; font-size: 12pt&quot;&gt;&lt;span style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;&lt;font color=&quot;#00cc00&quot;&gt;ConcurrentMap&amp;lt;Key, ResponseCacheImpl.Value&amp;gt; readOnlyCacheMap &lt;/font&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;sketch=0;fillColor=#60a917;fontColor=#ffffff;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="550" y="3487" width="610" height="100" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-56" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px&quot;&gt;订单服务&lt;/font&gt;&lt;/b&gt;" style="whiteSpace=wrap;html=1;rounded=0;sketch=0;fillColor=#008a00;fontColor=#ffffff;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="70" y="3720" width="183" height="120" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-57" value="" style="endArrow=none;html=1;strokeWidth=2;fillColor=#e51400;fontColor=#1D3557;exitX=1;exitY=0.5;exitDx=0;exitDy=0;endFill=0;startArrow=classic;startFill=1;strokeColor=#FF0000;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-58">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="3650" as="sourcePoint" />
            <mxPoint x="548" y="3580" as="targetPoint" />
            <Array as="points">
              <mxPoint x="400" y="3815" />
              <mxPoint x="400" y="3580" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-58" value="&lt;font style=&quot;font-size: 16px&quot;&gt;EurekaClient&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=0;sketch=0;fillColor=#e3c800;fontColor=#ffffff;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="100" y="3800" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-59" value="&lt;font style=&quot;font-size: 16px&quot;&gt;2. 订单服务&lt;br&gt;第一次拉取注册表&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="253" y="3770" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-60" value="&lt;font style=&quot;font-size: 16px&quot; color=&quot;#ff0000&quot;&gt;2.1 首先查询 &lt;br&gt;ReadOnlyCacheMap&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="400" y="3540" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-61" value="" style="endArrow=classic;html=1;strokeColor=#B20000;strokeWidth=5;fillColor=#e51400;fontColor=#1D3557;exitX=0.279;exitY=1.01;exitDx=0;exitDy=0;entryX=0.279;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitPerimeter=0;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-55" target="UJuq882CUuYNrBgm4tqE-54">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="670" y="3670" as="sourcePoint" />
            <mxPoint x="720" y="3620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-62" value="" style="endArrow=classic;html=1;strokeColor=#B20000;strokeWidth=5;fillColor=#e51400;fontColor=#1D3557;exitX=0.71;exitY=-0.012;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-54">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1000" y="3620" as="sourcePoint" />
            <mxPoint x="983" y="3580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-63" value="&lt;font style=&quot;font-size: 16px&quot; color=&quot;#cc00cc&quot;&gt;2.2 若ReadOnlyCacheMap没有数据&lt;br&gt;则查询 ReadWriteCacheMap&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="450" y="3620" width="270" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-64" value="" style="endArrow=classic;html=1;strokeColor=#B20000;strokeWidth=5;fillColor=#e51400;fontColor=#1D3557;exitX=0.279;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-54">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="700" y="3800" as="sourcePoint" />
            <mxPoint x="720" y="3860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-65" value="&lt;font style=&quot;font-size: 16px&quot; color=&quot;#cc00cc&quot;&gt;2.3 若 ReadWriteCacheMap没有数据&lt;br&gt;则直接查询内存注册表&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="450" y="3790" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-66" value="" style="endArrow=classic;html=1;strokeColor=#B20000;strokeWidth=5;fillColor=#e51400;fontColor=#1D3557;entryX=0.707;entryY=1.013;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" target="UJuq882CUuYNrBgm4tqE-54">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="981" y="3860" as="sourcePoint" />
            <mxPoint x="1080" y="3990" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-67" value="&lt;font style=&quot;font-size: 16px&quot;&gt;3. 发起注册 +1&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="1320" y="3900" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-68" value="" style="endArrow=classic;html=1;strokeColor=#457B9D;strokeWidth=2;fillColor=#A8DADC;fontColor=#1D3557;entryX=0.998;entryY=0.863;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-50" target="UJuq882CUuYNrBgm4tqE-52">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1430" y="3900" as="sourcePoint" />
            <mxPoint x="1400" y="3930" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1320" y="3929" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-69" value="&lt;font style=&quot;font-size: 16px&quot; color=&quot;#cc00cc&quot;&gt;4. 内存注册表发生变更时，&lt;br&gt;同时过期 ReadWriteCacheMap中的缓存&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="990" y="3795" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-70" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px&quot;&gt;&lt;font color=&quot;#cc00cc&quot;&gt;5. 每隔30s,后台线程&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px&quot;&gt;&lt;font color=&quot;#cc00cc&quot;&gt;自动同步 ReadOnlyCacheMap&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 16px&quot; color=&quot;#cc00cc&quot;&gt;ReadWriteCacheMap中的数据&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="990" y="3610" width="230" height="50" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-71" value="" style="endArrow=none;html=1;strokeWidth=2;fillColor=#A8DADC;entryX=0.913;entryY=-0.1;entryDx=0;entryDy=0;entryPerimeter=0;fontColor=#FF0000;strokeColor=#FF0000;startArrow=classic;startFill=1;endFill=0;" edge="1" parent="1" target="UJuq882CUuYNrBgm4tqE-60">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="100" y="3808" as="sourcePoint" />
            <mxPoint x="380" y="3875" as="targetPoint" />
            <Array as="points">
              <mxPoint x="40" y="3808" />
              <mxPoint x="40" y="3536" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-72" value="&lt;font style=&quot;font-size: 16px ; line-height: 140%&quot;&gt;6. 第一个30s拉取一次注册表&lt;br&gt;有可能还是走的ReadOnlyCacheMap的老数据&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#1D3557;" vertex="1" parent="1">
          <mxGeometry x="60" y="3512" width="340" height="50" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-73" value="" style="endArrow=none;html=1;strokeColor=#FF0000;strokeWidth=2;fillColor=#A8DADC;fontColor=#FF0000;exitX=0;exitY=0.75;exitDx=0;exitDy=0;endFill=0;startArrow=classic;startFill=1;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-58">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="3970" as="sourcePoint" />
            <mxPoint x="548" y="3503" as="targetPoint" />
            <Array as="points">
              <mxPoint x="20" y="3823" />
              <mxPoint x="20" y="3500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-74" value="&lt;font style=&quot;font-size: 16px&quot; color=&quot;#000000&quot;&gt;7.&amp;nbsp; 第二个30s拉取注册表，发现ReadOnlyCacheMap&lt;br&gt;ReadWriteCacheMap都没有数据，直接从内存中的&lt;br&gt;注册表拉拉取数据，发现2个库存服务&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="50" y="3440" width="390" height="50" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-75" value="" style="endArrow=classic;html=1;strokeColor=#FF0000;strokeWidth=2;fillColor=#A8DADC;fontColor=#FF0000;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-56" target="UJuq882CUuYNrBgm4tqE-52">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="3980" as="sourcePoint" />
            <mxPoint x="450" y="3930" as="targetPoint" />
            <Array as="points">
              <mxPoint x="162" y="3920" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-76" value="&lt;font style=&quot;font-size: 16px&quot; color=&quot;#000000&quot;&gt;每30s发送一次心跳到注册表中&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="190" y="3900" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-77" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="810" y="3590" width="100" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-78" value="" style="shape=mxgraph.bpmn.loop;html=1;outlineConnect=0;rounded=1;sketch=0;strokeColor=#C73500;fillColor=#fa6800;fontColor=#ffffff;align=left;strokeWidth=6;direction=west;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-77">
          <mxGeometry width="100" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-79" value="&lt;font style=&quot;font-size: 12px&quot; color=&quot;#000000&quot;&gt;&lt;b&gt;定时任务&lt;br&gt;每30s&lt;br&gt;缓存同步&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#FF0000;" vertex="1" parent="UJuq882CUuYNrBgm4tqE-77">
          <mxGeometry x="20" y="20" width="60" height="50" as="geometry" />
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-80" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=16;fontColor=#EA6B66;exitX=0.575;exitY=1.033;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF0000;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-50" target="UJuq882CUuYNrBgm4tqE-52">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1380" y="4110" as="sourcePoint" />
            <mxPoint x="960" y="4060" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1519" y="4020" />
              <mxPoint x="860" y="4020" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-81" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=16;fontColor=#EA6B66;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.455;entryY=1.025;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF0000;" edge="1" parent="1" source="UJuq882CUuYNrBgm4tqE-49" target="UJuq882CUuYNrBgm4tqE-52">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1170" y="4200" as="sourcePoint" />
            <mxPoint x="820" y="3940" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1600" y="3760" />
              <mxPoint x="1600" y="4060" />
              <mxPoint x="830" y="4060" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="UJuq882CUuYNrBgm4tqE-82" value="&lt;font style=&quot;font-size: 16px&quot; color=&quot;#000000&quot;&gt;每30s发送一次心跳到注册表中&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="980" y="4040" width="230" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
